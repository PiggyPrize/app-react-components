{"version":3,"file":"ThemeContextProvider.js","sources":["../../../lib/components/ThemeContextProvider.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Cookies from 'js-cookie'\nimport { GlobalHotKeys } from 'react-hotkeys'\nimport { PT_HOOKS_CONSTANTS } from '@pooltogether/hooks'\n\nimport { HOTKEYS_KEY_MAP } from '../constants'\n\nconst { COOKIE_OPTIONS } = PT_HOOKS_CONSTANTS\nconst THEME = 'theme'\n\nexport const ThemeContext = React.createContext(null)\n\nexport function ThemeContextProvider(props) {\n  const [theme, setTheme] = useState('dark')\n\n  useEffect(() => {\n    let stored = Cookies.get(THEME)\n\n    const body = document.body\n    body.classList.add('theme-dark')\n\n    if (typeof window !== 'undefined' && window.matchMedia) {\n      const setThemeAutomatically = (newValue) => {\n        if (newValue === 'dark') {\n          body.classList.add('theme-dark')\n          body.classList.remove('theme-light')\n\n          setTheme('dark')\n        } else if (newValue === 'light') {\n          body.classList.add('theme-light')\n          body.classList.remove('theme-dark')\n\n          setTheme('light')\n        }\n      }\n\n      // onLoad\n      setThemeAutomatically(stored)\n    }\n  }, [])\n\n  const toggleTheme = (e) => {\n    e.preventDefault()\n\n    const body = document.body\n\n    if (body.classList.contains('theme-dark')) {\n      body.classList.remove('theme-dark')\n      body.classList.add('theme-light')\n\n      Cookies.set(THEME, 'light', COOKIE_OPTIONS)\n\n      setTheme('light')\n    } else {\n      body.classList.remove('theme-light')\n      body.classList.add('theme-dark')\n\n      Cookies.set(THEME, 'dark', COOKIE_OPTIONS)\n\n      setTheme('dark')\n    }\n  }\n\n  const handlers = {\n    TOGGLE_THEME: toggleTheme\n  }\n\n  return (\n    <ThemeContext.Provider\n      value={{\n        theme,\n        toggleTheme\n      }}\n    >\n      <GlobalHotKeys keyMap={HOTKEYS_KEY_MAP} handlers={handlers} />\n\n      {props.children}\n    </ThemeContext.Provider>\n  )\n}\n"],"names":["COOKIE_OPTIONS","PT_HOOKS_CONSTANTS","THEME","ThemeContext","React","createContext","ThemeContextProvider","props","useState","theme","setTheme","useEffect","stored","Cookies","get","body","document","classList","add","window","matchMedia","setThemeAutomatically","newValue","remove","toggleTheme","e","preventDefault","contains","set","handlers","TOGGLE_THEME","GlobalHotKeys","HOTKEYS_KEY_MAP","children"],"mappings":";;;;;;;;;;;;;;;AAOA,IAAQA,cAAR,GAA2BC,wBAA3B,CAAQD,cAAR;AACA,IAAME,KAAK,GAAG,OAAd;IAEaC,YAAY,gBAAGC,yBAAK,CAACC,aAAN,CAAoB,IAApB;AAErB,SAASC,oBAAT,CAA8BC,KAA9B,EAAqC;AAC1C,kBAA0BC,cAAQ,CAAC,MAAD,CAAlC;AAAA;AAAA,MAAOC,KAAP;AAAA,MAAcC,QAAd;;AAEAC,EAAAA,eAAS,CAAC,YAAM;AACd,QAAIC,MAAM,GAAGC,SAAO,CAACC,GAAR,CAAYZ,KAAZ,CAAb;AAEA,QAAMa,IAAI,GAAGC,QAAQ,CAACD,IAAtB;AACAA,IAAAA,IAAI,CAACE,SAAL,CAAeC,GAAf,CAAmB,YAAnB;;AAEA,QAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAACC,UAA5C,EAAwD;AACtD,UAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACC,QAAD,EAAc;AAC1C,YAAIA,QAAQ,KAAK,MAAjB,EAAyB;AACvBP,UAAAA,IAAI,CAACE,SAAL,CAAeC,GAAf,CAAmB,YAAnB;AACAH,UAAAA,IAAI,CAACE,SAAL,CAAeM,MAAf,CAAsB,aAAtB;AAEAb,UAAAA,QAAQ,CAAC,MAAD,CAAR;AACD,SALD,MAKO,IAAIY,QAAQ,KAAK,OAAjB,EAA0B;AAC/BP,UAAAA,IAAI,CAACE,SAAL,CAAeC,GAAf,CAAmB,aAAnB;AACAH,UAAAA,IAAI,CAACE,SAAL,CAAeM,MAAf,CAAsB,YAAtB;AAEAb,UAAAA,QAAQ,CAAC,OAAD,CAAR;AACD;AACF,OAZD,CADsD;;;AAgBtDW,MAAAA,qBAAqB,CAACT,MAAD,CAArB;AACD;AACF,GAxBQ,EAwBN,EAxBM,CAAT;;AA0BA,MAAMY,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAAO;AACzBA,IAAAA,CAAC,CAACC,cAAF;AAEA,QAAMX,IAAI,GAAGC,QAAQ,CAACD,IAAtB;;AAEA,QAAIA,IAAI,CAACE,SAAL,CAAeU,QAAf,CAAwB,YAAxB,CAAJ,EAA2C;AACzCZ,MAAAA,IAAI,CAACE,SAAL,CAAeM,MAAf,CAAsB,YAAtB;AACAR,MAAAA,IAAI,CAACE,SAAL,CAAeC,GAAf,CAAmB,aAAnB;AAEAL,MAAAA,SAAO,CAACe,GAAR,CAAY1B,KAAZ,EAAmB,OAAnB,EAA4BF,cAA5B;AAEAU,MAAAA,QAAQ,CAAC,OAAD,CAAR;AACD,KAPD,MAOO;AACLK,MAAAA,IAAI,CAACE,SAAL,CAAeM,MAAf,CAAsB,aAAtB;AACAR,MAAAA,IAAI,CAACE,SAAL,CAAeC,GAAf,CAAmB,YAAnB;AAEAL,MAAAA,SAAO,CAACe,GAAR,CAAY1B,KAAZ,EAAmB,MAAnB,EAA2BF,cAA3B;AAEAU,MAAAA,QAAQ,CAAC,MAAD,CAAR;AACD;AACF,GApBD;;AAsBA,MAAMmB,QAAQ,GAAG;AACfC,IAAAA,YAAY,EAAEN;AADC,GAAjB;AAIA,sBACEpB,wCAAC,YAAD,CAAc,QAAd;AACE,IAAA,KAAK,EAAE;AACLK,MAAAA,KAAK,EAALA,KADK;AAELe,MAAAA,WAAW,EAAXA;AAFK;AADT,kBAMEpB,wCAAC2B,sBAAD;AAAe,IAAA,MAAM,EAAEC,yBAAvB;AAAwC,IAAA,QAAQ,EAAEH;AAAlD,IANF,EAQGtB,KAAK,CAAC0B,QART,CADF;AAYD;;;;;"}