{"version":3,"file":"TxStatus.js","sources":["../../../lib/components/TxStatus.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport FeatherIcon from 'feather-icons-react'\nimport Loader from 'react-loader-spinner'\n\nimport { Banner } from 'lib/components/Containers/Banner'\nimport { BlockExplorerLink } from './Links/BlockExplorerLink'\n\nexport const TxStatus = (props) => {\n  const { chainId, t, tx, title, subtitle } = props\n  const { hideOnInWallet, hideOnSent, hideOnSuccess, hideOnError } = props\n  const { inWalletMessage, sentMessage, successMessage, errorMessage } = props\n  const [showExtraMessage, setShowExtraMessage] = useState(false)\n\n  const txCancelled = tx?.cancelled\n  const txInWallet = tx?.inWallet && !tx?.sent\n  const txSent = tx?.sent && !tx?.completed\n  const txCompleted = tx?.completed\n  const txError = Boolean(tx?.error)\n\n  const transactionStatusText = t ? t('transactionStatus') : 'Transaction status'\n  const pleaseConfirmInWalletText = t\n    ? t('pleaseConfirmInYourWallet')\n    : 'Please confirm in your wallet'\n  const transactionSentConfirmingText = t\n    ? t('transactionSentConfirming')\n    : 'Transaction confirming ...'\n  const transactionSuccessfulText = t ? t('transactionSuccessful') : 'Transaction successful!'\n  const transactionFailedText = t ? t('transactionFailed') : 'Transaction failed'\n  const transactionHashText = t ? t('transactionHash') : 'Transaction hash:'\n  const transactionsMayTakeAFewMinutesText = t\n    ? t('transactionsMayTakeAFewMinutes')\n    : 'Transactions may take a few minutes.'\n\n  useEffect(() => {\n    let key\n    if (txSent) {\n      key = setTimeout(() => setShowExtraMessage(true), 15000)\n    }\n    return () => {\n      key && clearTimeout(key)\n    }\n  }, [txSent])\n\n  if (!tx) return null\n  if (txCancelled) return null\n  if (hideOnInWallet && txInWallet) return null\n  if (hideOnSent && txSent) return null\n  if (hideOnSuccess && txCompleted) return null\n  if (hideOnError && txError) return null\n\n  return (\n    <>\n      {title && <h3 className='text-inverse mb-4'>{title}</h3>}\n\n      {subtitle && <h6 className='text-accent-1 mb-4'>{subtitle}</h6>}\n\n      <Banner className='flex flex-col'>\n        {txSent && !txCompleted && !txError && (\n          <Loader type='Oval' height={50} width={50} color='#bbb2ce' className='mx-auto mb-4' />\n        )}\n\n        {txCompleted && !txError && (\n          <FeatherIcon\n            icon='check-circle'\n            className={'mx-auto stroke-1 w-16 h-16 stroke-current text-green mb-4'}\n          />\n        )}\n\n        {txCompleted && txError && (\n          <FeatherIcon\n            icon='x-circle'\n            className={'mx-auto stroke-1 w-16 h-16 stroke-current text-red mb-4'}\n          />\n        )}\n\n        <div className='text-accent-1 opacity-80 text-sm sm:text-base'>{transactionStatusText}</div>\n\n        {txInWallet && !txError && (\n          <div className='text-sm sm:text-base text-inverse'>\n            {inWalletMessage ? inWalletMessage : pleaseConfirmInWalletText}\n          </div>\n        )}\n\n        {txSent && (\n          <div className='text-sm sm:text-base text-inverse'>\n            {sentMessage ? sentMessage : transactionSentConfirmingText}\n          </div>\n        )}\n\n        {txCompleted && !txError && (\n          <div className='text-green text-sm sm:text-base'>\n            {successMessage ? successMessage : transactionSuccessfulText}\n          </div>\n        )}\n\n        {txError && (\n          <div className='text-red text-sm sm:text-base'>\n            {errorMessage ? errorMessage : transactionFailedText}\n          </div>\n        )}\n\n        {tx.hash && (\n          <div className='text-xxs sm:text-sm text-accent-1 opacity-80 mt-2'>\n            {transactionHashText}\n            <BlockExplorerLink\n              chainId={chainId}\n              hash={tx.hash}\n              className='underline text-accent-1 opacity-80'\n              shorten\n            />\n          </div>\n        )}\n\n        {showExtraMessage && (\n          <div className='text-xxs sm:text-sm text-accent-4 mt-2'>\n            {transactionsMayTakeAFewMinutesText}\n          </div>\n        )}\n      </Banner>\n    </>\n  )\n}\n\nTxStatus.defaultProps = {\n  hideOnError: false,\n  hideOnSuccess: false,\n  hideOnInWallet: false,\n  hideOnSent: false,\n  hideExtraMessage: false\n}\n"],"names":["TxStatus","props","chainId","t","tx","title","subtitle","hideOnInWallet","hideOnSent","hideOnSuccess","hideOnError","inWalletMessage","sentMessage","successMessage","errorMessage","useState","showExtraMessage","setShowExtraMessage","txCancelled","cancelled","txInWallet","inWallet","sent","txSent","completed","txCompleted","txError","Boolean","error","transactionStatusText","pleaseConfirmInWalletText","transactionSentConfirmingText","transactionSuccessfulText","transactionFailedText","transactionHashText","transactionsMayTakeAFewMinutesText","useEffect","key","setTimeout","clearTimeout","React","Banner","Loader","FeatherIcon","hash","BlockExplorerLink","defaultProps","hideExtraMessage"],"mappings":"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"}